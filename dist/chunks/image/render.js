(window.webpackJsonp_ultimate_addons_for_gutenberg=window.webpackJsonp_ultimate_addons_for_gutenberg||[]).push([[67],{180:function(e,t,i){"use strict";i.d(t,"c",(function(){return n})),i.d(t,"a",(function(){return r})),i.d(t,"b",(function(){return c})),i.d(t,"d",(function(){return l}));var a=i(152);const n=(e,t)=>!e&&Object(a.isBlobURL)(t),r=(e,t)=>t&&!e&&!Object(a.isBlobURL)(t),c=e=>{var t,i;return((null===(t=wp)||void 0===t||null===(i=t.media)||void 0===i?void 0:i.attachment(e))||{}).destroyed};function l(e,t,i){var n,r,c,l,o;if(!e||!e.url)return void t({url:void 0,alt:void 0,id:void 0,title:void 0,caption:void 0});if(Object(a.isBlobURL)(e.url))return void i(e.url);i();let s,d=((e,t)=>{const{alt:i,id:a,link:n,caption:r}=e,c={alt:i,id:a,link:n,caption:r};return c.url=e.url,c})(e,imageDefaultSize);var u,m;captionRef.current&&!get(d,["caption"])&&(d=omit(d,["caption"])),s=e.id&&e.id===id?{url:url}:{width:void 0,height:void 0,sizeSlug:(u=e,m=imageDefaultSize,u.hasOwnProperty("sizes")||u.hasOwnProperty("url")||u.hasOwnProperty("media_details")||u.hasOwnProperty("source_url")||void 0!==u[m]?imageDefaultSize:"full")};let g,h=attributes.linkDestination;if(!h)switch((null===(n=wp)||void 0===n||null===(r=n.media)||void 0===r||null===(c=r.view)||void 0===c||null===(l=c.settings)||void 0===l||null===(o=l.defaultProps)||void 0===o?void 0:o.link)||LINK_DESTINATION_NONE){case"file":case LINK_DESTINATION_MEDIA:h=LINK_DESTINATION_MEDIA;break;case"post":case LINK_DESTINATION_ATTACHMENT:h=LINK_DESTINATION_ATTACHMENT;break;case LINK_DESTINATION_CUSTOM:h=LINK_DESTINATION_CUSTOM;break;case LINK_DESTINATION_NONE:h=LINK_DESTINATION_NONE}switch(h){case LINK_DESTINATION_MEDIA:g=e.url;break;case LINK_DESTINATION_ATTACHMENT:g=e.link}d.href=g,t({...d,...s,linkDestination:h})}},181:function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"a",(function(){return n}));const a=20,n=["image"]},461:function(e,t,i){"use strict";i.r(t);var a=i(3),n=i.n(a),r=i(152),c=i(9),l=i(4),o=i(2),s=i(1),d=i(153),u=Object(o.createElement)(d.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Object(o.createElement)(d.Path,{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM5 4.5h14c.3 0 .5.2.5.5v8.4l-3-2.9c-.3-.3-.8-.3-1 0L11.9 14 9 12c-.3-.2-.6-.2-.8 0l-3.6 2.6V5c-.1-.3.1-.5.4-.5zm14 15H5c-.3 0-.5-.2-.5-.5v-2.4l4.1-3 3 1.9c.3.2.7.2.9-.1L16 12l3.5 3.4V19c0 .3-.2.5-.5.5z"})),m=i(6),g=i(13),h=i(154),b=(i(155),i(156)),f=i(180),v=i(181);function p({temporaryURL:e,attributes:{url:t="",alt:i,caption:a,align:n,id:r,href:d,rel:u,linkClass:f,linkDestination:p,title:O,width:E,height:I,linkTarget:S,sizeSlug:N},setAttributes:j,isSelected:R,insertBlocksAfter:_,onReplace:T,onCloseModal:w,onSelectImage:k,onSelectURL:L,onUploadError:A,containerRef:z,context:D,clientId:B,onImageLoadError:U}){var y;const M=Object(o.useRef)(),{allowResize:H=!0}=(Object(o.useRef)(),Object(g.usePrevious)(t),D),{getBlock:W}=Object(c.useSelect)(l.store),{replaceBlocks:C,toggleSelection:x}=Object(c.useDispatch)(l.store),{image:P,multiImageSelection:K}=Object(c.useSelect)(e=>{const{getMedia:t}=e(b.store),{getMultiSelectedBlockClientIds:i,getBlockName:a}=e(l.store),n=i();return{image:r&&R?t(r):null,multiImageSelection:n.length&&n.every(e=>"core/image"===a(e))}},[r,R]),{canInsertCover:F,imageEditing:V,imageSizes:J,maxWidth:G,mediaUpload:q}=Object(c.useSelect)(e=>{const{getBlockRootClientId:t,getSettings:i,canInsertBlockType:a}=e(l.store),n=t(B),{imageEditing:r,imageSizes:c,maxWidth:o,mediaUpload:s}=i();return{imageEditing:r,imageSizes:c,maxWidth:o,mediaUpload:s,canInsertCover:a("core/cover",n)}},[B]),Q=Object(g.useViewportMatch)("medium"),X=["wide","full"].includes(n),[{loadedNaturalWidth:Y,loadedNaturalHeight:Z},$]=Object(o.useState)({}),[ee,te]=Object(o.useState)(!1),ie=function(e,t){const[i,a]=Object(o.useState)();function n(){a(e.current.clientWidth)}return Object(o.useEffect)(n,t),Object(o.useEffect)(()=>{const{defaultView:t}=e.current.ownerDocument;return t.addEventListener("resize",n),()=>{t.removeEventListener("resize",n)}},[]),i}(z,[n]),ae=H&&!(X&&Q),{naturalWidth:ne,naturalHeight:re}=Object(o.useMemo)(()=>{var e,t;return{naturalWidth:(null===(e=M.current)||void 0===e?void 0:e.naturalWidth)||Y||void 0,naturalHeight:(null===(t=M.current)||void 0===t?void 0:t.naturalHeight)||Z||void 0}},[Y,Z,null===(y=M.current)||void 0===y?void 0:y.complete]),ce=Object(h.getFilename)(t);let le;le=i||(ce?Object(s.sprintf)(
/* translators: %s: file name */
Object(s.__)("This image has an empty alt attribute; its file name is %s"),ce):Object(s.__)("This image has an empty alt attribute"));let oe,se,de=React.createElement(React.Fragment,null,React.createElement("img",{src:e||t,alt:le,onError:()=>onImageError(),onLoad:e=>{var t,i;$({loadedNaturalWidth:null===(t=e.target)||void 0===t?void 0:t.naturalWidth,loadedNaturalHeight:null===(i=e.target)||void 0===i?void 0:i.naturalHeight})},ref:M}),e&&React.createElement(m.Spinner,null));if(ie&&ne&&re){const e=ne>ie,t=re/ne;oe=e?ie:ne,se=e?ie*t:re}if(r&&ne&&re&&V&&ee)de=React.createElement(l.__experimentalImageEditor,{url:t,width:E,height:I,clientWidth:ie,naturalHeight:re,naturalWidth:ne});else if(ae&&oe){const e=E||oe,t=I||se,i=ne/re,a=ne<re?v.b:v.b*i,r=re<ne?v.b:v.b/i,c=2.5*G;let l=!1,o=!1;"center"===n?(l=!0,o=!0):Object(s.isRTL)()?"left"===n?l=!0:o=!0:"right"===n?o=!0:l=!0,de=React.createElement(m.ResizableBox,{size:{width:E||"auto",height:I||"auto"},showHandle:R,minWidth:a,maxWidth:c,minHeight:r,maxHeight:c/i,lockAspectRatio:!0,enable:{top:!1,right:l,bottom:!0,left:o},onResizeStart:function(){x(!1)},onResizeStop:(i,a,n,r)=>{x(!0),j({width:parseInt(e+r.width,10),height:parseInt(t+r.height,10)})}},de)}else de=React.createElement("div",{style:{width:E,height:I}},de);return React.createElement(React.Fragment,null,React.createElement(l.__experimentalImageEditingProvider,{id:r,url:t,naturalWidth:ne,naturalHeight:re,clientWidth:ie,onSaveImage:e=>j(e),isEditing:ee,onFinishEditing:()=>te(!1)},de))}const O=e=>{e=e.parentProps;const{attributes:t,setAttributes:i,className:a,isSelected:d,insertBlocksAfter:m,onReplace:g,context:h,clientId:b}=e,{url:O,alt:E,caption:I,id:S,width:N,height:j,sizeSlug:R}=t,{createNotice:_}=Object(c.useDispatch)("core/notices"),[T,w]=Object(o.useState)(),[k,L]=Object(o.useState)(),A=Object(o.useRef)();Object(o.useEffect)(()=>{A.current=E},[E]);const z=Object(o.useRef)();Object(o.useEffect)(()=>{z.current=I},[I]);const D=Object(o.useRef)(),{imageDefaultSize:B,mediaUpload:U}=Object(c.useSelect)(e=>{const{getSettings:t}=e(l.store),{imageDefaultSize:i,mediaUpload:a}=t();return{imageDefaultSize:i,mediaUpload:a}},[]);function y(){Object(f.b)(null==t?void 0:t.id)&&i({url:void 0,id:void 0})}function M(e){_("error",e,{type:"snackbar"})}function H(e){e!==O&&i({url:e,id:void 0,width:void 0,height:void 0,sizeSlug:B})}let W=Object(f.c)(S,O);Object(o.useEffect)(()=>{if(!W)return;const e=getBlobByURL(O);e&&U({filesList:[e],onFileChange:([e])=>{Object(f.d)(e,i,w,_)},allowedTypes:v.a,onError:e=>{W=!1,_("error",e,{type:"snackbar"}),i({src:void 0,id:void 0,url:void 0})}})},[]),Object(o.useEffect)(()=>{W?w(O):Object(r.revokeBlobURL)(T)},[W,O]);const C=Object(f.a)(S,O)?O:void 0,x=!!O&&React.createElement("img",{alt:Object(s.__)("Edit image"),title:Object(s.__)("Edit image"),className:"edit-image-preview",src:O}),P=n()(a,{"is-transient":T,"is-resized":!!N||!!j,["size-"+R]:R}),K=Object(l.useBlockProps)({ref:D,className:P});return React.createElement(React.Fragment,null,React.createElement("figure",K,(T||O)&&React.createElement(p,{temporaryURL:T,attributes:t,setAttributes:i,isSelected:d,insertBlocksAfter:m,onReplace:g,onSelectImage:e=>Object(f.d)(e,i,w,_),onSelectURL:H,onUploadError:M,containerRef:D,context:h,clientId:b,onCloseModal:y,onImageLoadError:function(e=!1){e||i({url:void 0,id:void 0})}}),React.createElement(l.MediaPlaceholder,{icon:React.createElement(l.BlockIcon,{icon:u}),onSelect:e=>Object(f.d)(e,i,w,_),onSelectURL:H,onError:M,onClose:y,accept:"image/*",allowedTypes:v.a,value:{id:S,src:C},mediaPreview:x,disableMediaButtons:T||O})))};O.propTypes={},O.defaultProps={},t.default=O}}]);